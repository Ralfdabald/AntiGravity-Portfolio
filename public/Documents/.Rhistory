q()
library(rstudioapi)
ls
2+5
a<-7
a=6
a=6 ; a
pi
pi<3.14152965358979323846
options(digits=4)
current_path = rstudioapi::getActiceDocumentContext()$pathsetwd(dirname(current_path ))rm(list=ls())
a==FALSE
a==FALSE
a=6 ; print(a)
2+5
a<-7 ; a
a=6 ; print(a)
pi<3.14152965358979323846
pi
options(digits=4)
pi
options(digits=8)
pi
a<-TRUE
a<-TRUE
is.logical(a)
isFALSE(a)
a==FALSE
paste("x","y")
paste("x","y",sep=" + ")
paste("Fig",1:4)
paste("x","y"),1:4,sep="",collapse=" + "
paste(c("x","y"),1:4,sep="",collapse=" + ")
d<-c(1,4,7) ;d
d<-seq(from=1, to=35, by=3) ;d
d<-seq(from=1, to=35, by=3) ;d
sentence<-("This is a test")
sentence<-("This is a test") ;sentence
sentence<-("This is a test") ;sentence
word<-("another") ;word
newsentence<-(c("This is another test")) ; newsentence
newsentence<-(c("This is another test")) ; newsentence
paste("sentence" + "newsentence")
substr<-`(This, 1, 4, That)
substr<-`(This, 1, 1, That)
substr<-`(This, 1, 1, That)
substr(This, 1, 1, That);
substr(This, T, s, That);
substr(This, That, That, That);
substr(This, That, That, That); newsentence
sentence<-("This is a test") ;
word<-("another")
newsentence<-paste(substr(sentence,1,7)\,word,substr(sentence,11,14))
sentence<-("This is a test") ;
word<-("another")
newsentence<-paste(substr(sentence,1,7),word,substr(sentence,11,14))
newsentence
sentence<-("This is a test") ;
word<-("another")
sentence<-("This is a test") ;
word<-("another")
newsentence<-paste(substr(sentence,1,7),word,substr(sentence,11,14))
substr(newsentence,1,4)<-"That"
newsentence
#subsetting
d[3]
d[-2]
d[-c(2,3)]
f=c(d,d,1,9) ; f
d==4
d!=4
which(d==4)
which.max(d)
#matrice
rmat<-rbind(d,d) ; rmat
cmat<-cbind(d,d) ; cmat
mat<-matrix(10:15,nrow=4,ncol=2,byrow=4) ;mat
dim(mat)
ncol(mat)
nrow(mat)
colSums(mat)
t(mat)
#lists
lst=list(a=c(TRUE,FALSE), b=matrix(1:4,2,2),c="This is a list")
lst$a[2]
lst$b
lst$c
#automatic type coercion
x=c(1,2,3,8)
y=rep(TRUE,3)
c(x,y)
c(x,"a")
c(y,"a")
# **************SET WORKING DIRECTORY AND CLEAR ENVIRONMENT ******************************
library(rstudioapi)  # This is a external library of functions
# Getting the path of your current open file
current_path = rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path ))
library(MASS)
# show available data sets
data()
# use the Boston data set (Boston)
data(Boston)
# place within the global environment
attach(Boston)
View(Boston)
# remove the data set from the environment
rm(Boston)
# remove the library from the environment
detach("package:MASS")
name<-c("John","Suzie","Laura","Frank","Henrietta","Billy","Bob","James")
exam1<-c(88,89,75,66,95,90,77,80)
exam2<-c(93,82,81,70,82,95,72,85)
exam3<-c(90,95,70,55,85,98,80,88)
scores<-data.frame(name,exam1,exam2,exam3)
Boston$zn[1]
zn
View(Boston)
# remove the data set from the environment
rm(Boston)
# remove the library from the environment
detach("package:MASS")
name<-c("John","Suzie","Laura","Frank","Henrietta","Billy","Bob","James")
exam1<-c(88,89,75,66,95,90,77,80)
exam2<-c(93,82,81,70,82,95,72,85)
exam3<-c(90,95,70,55,85,98,80,88)
scores<-data.frame(name,exam1,exam2,exam3)
names(scores)
names(scores)[1]="firstname"
# add a new field
# first create a vector of last names
lastname=c("Reilly","Smith","Berg","Abbey","Madison","Johnson","Franklin","McMurphy")
scores=data.frame(scores,lastname)
# perhaps you want to reorder the fields in the data frame
scores=scores[,c(5,1:4)]
temp<-scores[1,c(2,3)]
temp<-scores[c(1:4),c(2,3)]
# to save a file use save(dataframe, file="filename.rdata")
save(scores,file="scores.rdata")
rm(scores)
# to load a file use load("filename.rdata")
load("scores.rdata")
scores$firstname
rm(scores)
load("C:/Users/Dragonfly/OneDrive - Texas A&M University/Trading/Waves.rdata")
# to export or save in another file format use the write command
write.csv(scores,file="scores.csv",row.names = FALSE)
install.packages(c("quantmod", "tidyverse", "lubridate", "httr", "data.table"))
library(quantmod)
library(tidyverse)
library(lubridate)
library(httr)
library(data.table)
tickers <- read.csv("SP Tickers.csv")
removals <- read.csv("SP Removals.csv")
sectors <- read.csv("sectors.csv")
# View the first few rows of each data
head(tickers)
head(additions)
head(removals)
head(sectors)
install.packages(c("bit", "broom", "bslib", "curl", "jsonlite", "knitr", "mime", "processx", "ps", "R6", "RcppArmadillo", "readxl", "stringi", "tinytex", "xfun", "xml2"))
install.packages(c("tidyquant", "dplyr", "ggplot2", "caret", "xgboost", "TTR", "quantmod"))
# Load necessary libraries
library(tidyquant)
install.packages(c("tidyquant", "dplyr", "ggplot2", "caret", "xgboost", "TTR", "quantmod"))
# **************SET WORKING DIRECTORY AND CLEAR ENVIRONMENT ******************************
library(rstudioapi)  # This is a external library of functions
# Getting the path of your current open file
current_path = rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path ))
rm(list=ls())
install.packages(c("tidyquant", "dplyr", "ggplot2", "caret", "xgboost", "TTR", "quantmod"))
# **************SET WORKING DIRECTORY AND CLEAR ENVIRONMENT ******************************
library(rstudioapi)  # This is a external library of functions
# Getting the path of your current open file
current_path = rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path ))
rm(list=ls())
# Load necessary libraries
library(quantmod)
library(TTR)
library(ggplot2)
# Define function to implement trading strategy
trading_strategy <- function(symbol) {
# Get stock data
getSymbols(symbol, from = "2023-01-01", to = Sys.Date(), src = "yahoo", auto.assign = TRUE)
stock_data <- get(symbol)
# Calculate indicators
stock_data$SMA10 <- SMA(Cl(stock_data), n = 10)
stock_data$SMA50 <- SMA(Cl(stock_data), n = 50)
stock_data$RSI14 <- RSI(Cl(stock_data), n = 14)
macd <- MACD(Cl(stock_data), nFast = 12, nSlow = 26, nSig = 9, maType = EMA)
stock_data$MACD <- macd$macd
stock_data$Signal <- macd$signal
# Define Buy/Sell Signals
stock_data$Buy_Signal <- ifelse(stock_data$SMA10 > stock_data$SMA50 & stock_data$RSI14 < 30 & stock_data$MACD > stock_data$Signal, 1, 0)
stock_data$Sell_Signal <- ifelse(stock_data$SMA10 < stock_data$SMA50 & stock_data$RSI14 > 70 & stock_data$MACD < stock_data$Signal, -1, 0)
# Create plot with buy/sell signals
stock_plot <- ggplot(stock_data, aes(x = index(stock_data))) +
geom_line(aes(y = Cl(stock_data)), color = "blue") +
geom_point(data = subset(stock_data, Buy_Signal == 1), aes(y = Cl(stock_data)), color = "green", size = 3, shape = 24) +
geom_point(data = subset(stock_data, Sell_Signal == -1), aes(y = Cl(stock_data)), color = "red", size = 3, shape = 25) +
labs(title = paste("Trading Signals for", symbol), x = "Date", y = "Closing Price") +
theme_minimal()
print(stock_plot)
}
# Run strategy for Chevron and NVIDIA
trading_strategy("CVX")
trading_strategy("NVDA")
# **************SET WORKING DIRECTORY AND CLEAR ENVIRONMENT ******************************
library(rstudioapi)  # This is a external library of functions
# Getting the path of your current open file
current_path = rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path ))
rm(list=ls())
# Load necessary libraries
library(quantmod)
library(TTR)
library(PerformanceAnalytics)
library(ggplot2)
library(dplyr)
# Define function for trading strategy and backtesting
trading_strategy <- function(symbol, initial_capital = 10000) {
# Get stock data
getSymbols(symbol, from = "2023-01-01", to = Sys.Date(), src = "yahoo", auto.assign = TRUE)
stock_data <- get(symbol)
# Compute technical indicators
stock_data$SMA10 <- SMA(Cl(stock_data), n = 10)
stock_data$SMA50 <- SMA(Cl(stock_data), n = 50)
stock_data$RSI14 <- RSI(Cl(stock_data), n = 14)
macd <- MACD(Cl(stock_data), nFast = 12, nSlow = 26, nSig = 9, maType = EMA)
stock_data$MACD <- macd$macd
stock_data$Signal <- macd$signal
# Define Buy/Sell Signals
stock_data$Buy_Signal <- ifelse(stock_data$SMA10 > stock_data$SMA50 & stock_data$RSI14 < 30 & stock_data$MACD > stock_data$Signal, 1, 0)
stock_data$Sell_Signal <- ifelse(stock_data$SMA10 < stock_data$SMA50 & stock_data$RSI14 > 70 & stock_data$MACD < stock_data$Signal, -1, 0)
# Backtesting - Simulating Trading Performance
stock_data$Signal <- stock_data$Buy_Signal + stock_data$Sell_Signal  # 1 for buy, -1 for sell
stock_data$Daily_Returns <- dailyReturn(Cl(stock_data), type = "log")
stock_data$Strategy_Returns <- lag(stock_data$Signal) * stock_data$Daily_Returns
# Calculate cumulative returns
stock_data$Cumulative_Market <- cumprod(1 + stock_data$Daily_Returns)
stock_data$Cumulative_Strategy <- cumprod(1 + stock_data$Strategy_Returns)
# Plot stock price with Buy/Sell signals
stock_plot <- ggplot(stock_data, aes(x = index(stock_data))) +
geom_line(aes(y = Cl(stock_data)), color = "blue") +
geom_point(data = subset(stock_data, Buy_Signal == 1), aes(y = Cl(stock_data)), color = "green", size = 3, shape = 24) +
geom_point(data = subset(stock_data, Sell_Signal == -1), aes(y = Cl(stock_data)), color = "red", size = 3, shape = 25) +
labs(title = paste("Trading Signals for", symbol), x = "Date", y = "Closing Price") +
theme_minimal()
print(stock_plot)
# Plot performance comparison
returns_data <- data.frame(Date = index(stock_data),
Market = stock_data$Cumulative_Market,
Strategy = stock_data$Cumulative_Strategy) %>% na.omit()
performance_plot <- ggplot(returns_data, aes(x = Date)) +
geom_line(aes(y = Market, color = "Market Return"), size = 1) +
geom_line(aes(y = Strategy, color = "Strategy Return"), size = 1) +
labs(title = paste("Performance Comparison:", symbol),
x = "Date", y = "Cumulative Return") +
scale_color_manual(values = c("Market Return" = "blue", "Strategy Return" = "green")) +
theme_minimal()
print(performance_plot)
# Print final results
final_market_return <- last(stock_data$Cumulative_Market, 1)
final_strategy_return <- last(stock_data$Cumulative_Strategy, 1)
cat("\nFinal Returns for", symbol, "\n")
cat("Buy & Hold Return:", round(final_market_return - 1, 4) * 100, "%\n")
cat("Strategy Return:", round(final_strategy_return - 1, 4) * 100, "%\n")
}
# Run strategy for Chevron and NVIDIA
trading_strategy("CVX")
View(trading_strategy)
# **************SET WORKING DIRECTORY AND CLEAR ENVIRONMENT ******************************
library(rstudioapi)  # This is a external library of functions
# Getting the path of your current open file
current_path = rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path ))
rm(list=ls())
# Load necessary libraries
library(quantmod)
library(TTR)
library(PerformanceAnalytics)
library(ggplot2)
library(dplyr)
# Define function for trading strategy and backtesting
trading_strategy <- function(symbol, initial_capital = 10000) {
# Get stock data
getSymbols(symbol, from = "2023-01-01", to = Sys.Date(), src = "yahoo", auto.assign = TRUE)
stock_data <- get(symbol)
# Compute technical indicators
stock_data$SMA10 <- SMA(Cl(stock_data), n = 10)
stock_data$SMA50 <- SMA(Cl(stock_data), n = 50)
stock_data$RSI14 <- RSI(Cl(stock_data), n = 14)
macd <- MACD(Cl(stock_data), nFast = 12, nSlow = 26, nSig = 9, maType = EMA)
stock_data$MACD <- macd$macd
stock_data$Signal <- macd$signal
# Define Buy/Sell Signals
stock_data$Buy_Signal <- ifelse(stock_data$SMA10 > stock_data$SMA50 & stock_data$RSI14 < 30 & stock_data$MACD > stock_data$Signal, 1, 0)
stock_data$Sell_Signal <- ifelse(stock_data$SMA10 < stock_data$SMA50 & stock_data$RSI14 > 70 & stock_data$MACD < stock_data$Signal, -1, 0)
# Backtesting - Simulating Trading Performance
stock_data$Signal <- stock_data$Buy_Signal + stock_data$Sell_Signal  # 1 for buy, -1 for sell
stock_data$Daily_Returns <- dailyReturn(Cl(stock_data), type = "log")
stock_data$Strategy_Returns <- lag(stock_data$Signal) * stock_data$Daily_Returns
# Calculate cumulative returns
stock_data$Cumulative_Market <- cumprod(1 + stock_data$Daily_Returns)
stock_data$Cumulative_Strategy <- cumprod(1 + stock_data$Strategy_Returns)
# Plot stock price with Buy/Sell signals
stock_plot <- ggplot(stock_data, aes(x = index(stock_data))) +
geom_line(aes(y = Cl(stock_data)), color = "blue") +
geom_point(data = subset(stock_data, Buy_Signal == 1), aes(y = Cl(stock_data)), color = "green", size = 3, shape = 24) +
geom_point(data = subset(stock_data, Sell_Signal == -1), aes(y = Cl(stock_data)), color = "red", size = 3, shape = 25) +
labs(title = paste("Trading Signals for", symbol), x = "Date", y = "Closing Price") +
theme_minimal()
print(stock_plot)
# Plot performance comparison
returns_data <- data.frame(Date = index(stock_data),
Market = stock_data$Cumulative_Market,
Strategy = stock_data$Cumulative_Strategy) %>% na.omit()
performance_plot <- ggplot(returns_data, aes(x = Date)) +
geom_line(aes(y = Market, color = "Market Return"), size = 1) +
geom_line(aes(y = Strategy, color = "Strategy Return"), size = 1) +
labs(title = paste("Performance Comparison:", symbol),
x = "Date", y = "Cumulative Return") +
scale_color_manual(values = c("Market Return" = "blue", "Strategy Return" = "green")) +
theme_minimal()
print(performance_plot)
# Print final results
final_market_return <- last(stock_data$Cumulative_Market, 1)
final_strategy_return <- last(stock_data$Cumulative_Strategy, 1)
cat("\nFinal Returns for", symbol, "\n")
cat("Buy & Hold Return:", round(final_market_return - 1, 4) * 100, "%\n")
cat("Strategy Return:", round(final_strategy_return - 1, 4) * 100, "%\n")
}
# Run strategy for Chevron and NVIDIA
trading_strategy("CVX")
trading_strategy("NVDA")
rlang::last_trace()
install.packages("quantmod")
install.packages("quantmod", lib = "C:/Rpackages/")
library(quantmod)
install.packages("quantmod")   # For fetching stock data
install.packages("quantmod", lib = "C:/Rpackages/")
library(quantmod, lib.loc = "C:/Rpackages/")
install.packages("tidyquant", lib = "C:/Rpackages/")  # For easier financial analysis
